---
title: Embeddings
---

Dartantic supports generating vector embeddings for text using both OpenAI and
Gemini providers, as well as a growing list of other providers (see
[Supported Providers](/supported-providers) to find out which do what in human
English and [Provider Capabilities](/provider-capabilities) to find out which
providers support what in your code). 

Embeddings are useful for semantic search, clustering, and building RAG
(Retrieval-Augmented Generation) applications.

## Basic Embedding Usage

The following example shows how to generate embeddings for a document and a
query.

```dart
import 'package:dartantic_ai/dartantic_ai.dart';

void main() async {
  final agent = Agent('openai');

  // Generate a document embedding
  final documentText = 'Machine learning is a subset of artificial intelligence.';
  final documentEmbedding = await agent.createEmbedding(
    documentText,
    type: EmbeddingType.document,
  );
  print('Document embedding: ${documentEmbedding.length} dimensions'); // Output: Document embedding: 1536 dimensions

  // Generate a query embedding
  final queryText = 'What is machine learning?';
  final queryEmbedding = await agent.createEmbedding(
    queryText,
    type: EmbeddingType.query,
  );
  print('Query embedding: ${queryEmbedding.length} dimensions'); // Output: Query embedding: 1536 dimensions
}
```

## Embedding Similarity and Search

Use the built-in cosine similarity function to compare embeddings for semantic
search:

```dart
import 'package:dartantic_ai/dartantic_ai.dart';

void main() async {
  final agent = Agent('openai');

  // Create embeddings for different texts
  final text1 = 'The cat sat on the mat.';
  final text2 = 'A cat is sitting on a mat.';
  final text3 = 'The weather is sunny today.';

  final embedding1 = await agent.createEmbedding(text1, type: EmbeddingType.document);
  final embedding2 = await agent.createEmbedding(text2, type: EmbeddingType.document);
  final embedding3 = await agent.createEmbedding(text3, type: EmbeddingType.document);

  // Calculate similarities
  final similarity1vs2 = Agent.cosineSimilarity(embedding1, embedding2);
  final similarity1vs3 = Agent.cosineSimilarity(embedding1, embedding3);

  print('Similarity between similar texts: ${similarity1vs2.toStringAsFixed(4)}'); // Output: Similarity between similar texts: 0.8934
  print('Similarity between different texts: ${similarity1vs3.toStringAsFixed(4)}'); // Output: Similarity between different texts: 0.2156

  // Similar texts should have higher similarity
  if (similarity1vs2 > similarity1vs3) {
    print('✓ Similar texts are more semantically related'); // Output: ✓ Similar texts are more semantically related
  }
}
```

## Cross-Provider Embedding Support

Both OpenAI and Gemini providers support embedding generation with consistent
APIs. However, the embeddings themselves are NOT compatible between providers.
This means that embeddings generated by one provider cannot be directly compared
or used interchangeably with embeddings generated by another provider.

```dart
import 'package:dartantic_ai/dartantic_ai.dart';

void main() async {
  final text = 'Artificial intelligence is transforming technology.';

  // OpenAI embeddings (supports 768 and 1536 dimensions)
  final openaiAgent = Agent('openai');
  final openaiEmbedding = await openaiAgent.createEmbedding(
    text,
    type: EmbeddingType.document,
    dimensions: 1536, // or 768
  );
  print('OpenAI embedding: ${openaiEmbedding.length} dimensions');

  // Gemini experimental embeddings (supports 768, 1536, and 3072 dimensions)
  final geminiAgent = Agent('google', embeddingModel: 'gemini-embedding-exp-03-07');
  final geminiEmbedding = await geminiAgent.createEmbedding(
    text,
    type: EmbeddingType.document,
    dimensions: 3072, // or 1536, or 768
  );
  print('Gemini embedding: ${geminiEmbedding.length} dimensions');

  // Note: Different providers and models may have different embedding dimensions
  // But the API and similarity calculations work the same way
}
```

## Embedding Dimensionality

Most embedding models support one or more common dimensionalities, such as 768, 1536, or 3072. Not all providers or models support all values, and the set of supported dimensions may change over time as new models are released.

If you request a dimension not supported by the provider/model, you may get an error or the provider will return its default size.

Specify the desired dimensionality using the `dimensions` parameter:

```dart
final embedding = await agent.createEmbedding(
  'your text',
  type: EmbeddingType.document,
  dimensions: 1536, // or 768, 3072, etc. as supported
);
```

Check your provider/model documentation for the most up-to-date list of supported embedding sizes.

For a sample of embedding usage, see
[embeddings.dart](https://github.com/csells/dartantic_ai/blob/main/example/bin/embeddings.dart). 